/* Markdown 样式 */
@import './styles/markdown.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 全局文本选中样式 */
::selection {
  background-color: var(--color-primary-100);
  color: var(--color-primary-800);
}

::-moz-selection {
  background-color: var(--color-primary-100);
  color: var(--color-primary-800);
}

/* 自定义字体定义 */
@font-face {
  font-family: 'OPPO Sans';
  src: url('/fonts/OPPOSans.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono Nerd Font';
  src: url('/fonts/JetBrainsMono.ttf') format('truetype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

/* 字体加载失败时的样式 */
@supports not (font-display: swap) {
  body {
    font-family:
      'Inter',
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      'Roboto',
      'Oxygen',
      'Ubuntu',
      'Cantarell',
      'Fira Sans',
      'Droid Sans',
      'Helvetica Neue',
      sans-serif;
  }
}

@layer base {
  html {
    font-family: 'OPPO Sans', 'Inter', system-ui, sans-serif;
  }

  body {
    background-color: var(--color-bg-secondary);
    color: var(--color-text-primary);
    font-family: 'OPPO Sans', 'Inter', system-ui, sans-serif;
    overflow: hidden; /* 隐藏body滚动条，避免与主内容区域滚动条冲突 */
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  /* Gray background color variables for light mode - redesigned for consistency */
  :root {
    --bg-gray-50: #fafafa;
    --bg-gray-100: #f5f5f5;
    --bg-gray-200: #eeeeee;
    --bg-gray-300: #e0e0e0;
    --bg-gray-400: #bdbdbd;
    --bg-gray-500: #9e9e9e;
    --bg-gray-600: #757575;
    --bg-gray-700: #616161;
    --bg-gray-800: #424242;
    --bg-gray-900: #212121;

    /* Text colors for light mode - redesigned for better contrast */
    --text-gray-50: #fafafa;
    --text-gray-100: #f5f5f5;
    --text-gray-200: #eeeeee;
    --text-gray-300: #e0e0e0;
    --text-gray-400: #bdbdbd;
    --text-gray-500: #9e9e9e;
    --text-gray-600: #757575;
    --text-gray-700: #616161;
    --text-gray-800: #424242;
    --text-gray-900: #212121;
  }

  /* Gray background color variables for dark mode - redesigned based on #2a2a2a */
  .dark {
    --bg-gray-50: #1a1a1a;
    --bg-gray-100: #2a2a2a;
    --bg-gray-200: #3a3a3a;
    --bg-gray-300: #4a4a4a;
    --bg-gray-400: #5a5a5a;
    --bg-gray-500: #6a6a6a;
    --bg-gray-600: #8a8a8a;
    --bg-gray-700: #3a3a3a;
    --bg-gray-800: #2a2a2a;
    --bg-gray-900: #1a1a1a;

    /* Text colors for dark mode - redesigned for better contrast */
    --text-gray-50: #eeeeee;
    --text-gray-100: #cccccc;
    --text-gray-200: #aaaaaa;
    --text-gray-300: #8a8a8a;
    --text-gray-400: #6a6a6a;
    --text-gray-500: #5a5a5a;
    --text-gray-600: #4a4a4a;
    --text-gray-700: #aaaaaa;
    --text-gray-800: #aaaaaa;
    --text-gray-900: #eeeeee;
  }
}

@layer components {
  /* 代码和调试相关的字体类 */
  .font-mono-nerd {
    font-family:
      'JetBrains Mono Nerd Font', 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace;
  }

  .font-ui {
    font-family: 'OPPO Sans', 'Inter', system-ui, sans-serif;
  }

  .debug-panel {
    font-family:
      'JetBrains Mono Nerd Font', 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace;
  }

  .debug-console {
    font-family:
      'JetBrains Mono Nerd Font', 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace;
    font-feature-settings:
      'liga' 1,
      'calt' 1;
  }

  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 font-medium py-2 px-4 rounded-theme-lg transition-colors duration-200;
    color: var(--color-text-inverse);
  }

  .btn-secondary {
    background-color: var(--color-bg-tertiary);
    color: var(--color-text-primary);
    @apply hover:opacity-80 font-medium py-2 px-4 rounded-theme-lg transition-all duration-200;
  }

  .btn-outline {
    border: 1px solid var(--color-border-primary);
    background-color: transparent;
    color: var(--color-text-secondary);
    @apply hover:bg-bg-tertiary font-medium py-2 px-4 rounded-theme-lg transition-all duration-200;
  }

  .card {
    background-color: var(--color-bg-paper);
    border: 1px solid var(--color-border-primary);
    box-shadow: var(--card-shadow);
    @apply rounded-theme-lg p-6 transition-all duration-200;
  }

  .input {
    background-color: var(--color-bg-paper);
    border: 1px solid var(--color-border-primary);
    color: var(--color-text-primary);
    @apply block w-full px-3 py-2 rounded-theme-md shadow-theme-sm focus:outline-none transition-all duration-200;
  }

  .input:focus {
    border-color: var(--color-focus);
    box-shadow: var(--focus-ring);
  }

  .input::placeholder {
    color: var(--color-text-tertiary);
  }

  .label {
    color: var(--color-text-secondary);
    @apply block text-sm font-medium mb-2;
  }

  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .method-badge {
    @apply inline-flex items-center px-2 py-1 rounded text-xs font-semibold tracking-wide uppercase;
  }

  .status-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
}

@layer utilities {
  /* Gray background utilities with dark mode support - using !important to override Tailwind defaults */
  .bg-gray-50 {
    background-color: var(--bg-gray-50) !important;
  }
  .bg-gray-100 {
    background-color: var(--bg-gray-100) !important;
  }
  .bg-gray-200 {
    background-color: var(--bg-gray-200) !important;
  }
  .bg-gray-300 {
    background-color: var(--bg-gray-300) !important;
  }
  .bg-gray-400 {
    background-color: var(--bg-gray-400) !important;
  }
  .bg-gray-500 {
    background-color: var(--bg-gray-500) !important;
  }
  .bg-gray-600 {
    background-color: var(--bg-gray-600) !important;
  }
  .bg-gray-700 {
    background-color: var(--bg-gray-700) !important;
  }
  .bg-gray-800 {
    background-color: var(--bg-gray-800) !important;
  }
  .bg-gray-900 {
    background-color: var(--bg-gray-900) !important;
  }

  /* Gray text utilities with dark mode support - using !important to override Tailwind defaults */
  .text-gray-50 {
    color: var(--text-gray-50) !important;
  }
  .text-gray-100 {
    color: var(--text-gray-100) !important;
  }
  .text-gray-200 {
    color: var(--text-gray-200) !important;
  }
  .text-gray-300 {
    color: var(--text-gray-300) !important;
  }
  .text-gray-400 {
    color: var(--text-gray-400) !important;
  }
  .text-gray-500 {
    color: var(--text-gray-500) !important;
  }
  .text-gray-600 {
    color: var(--text-gray-600) !important;
  }
  .text-gray-700 {
    color: var(--text-gray-700) !important;
  }
  .text-gray-800 {
    color: var(--text-gray-800) !important;
  }
  .text-gray-900 {
    color: var(--text-gray-900) !important;
  }

  /* 滚动条基础样式 */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
  }

  /* WebKit 滚动条样式 */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.3);
    border-radius: 8px;
    border: 2px solid transparent;
    background-clip: content-box;
    transition: all 0.2s ease;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(156, 163, 175, 0.6);
  }

  .custom-scrollbar::-webkit-scrollbar-corner {
    background: transparent;
  }

  /* 细滚动条样式 */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.25);
    border-radius: 6px;
    border: 1px solid transparent;
    background-clip: content-box;
    transition: all 0.2s ease;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: rgba(156, 163, 175, 0.5);
  }

  .scrollbar-thin::-webkit-scrollbar-corner {
    background: transparent;
  }

  /* 隐藏滚动条但保持滚动功能 */
  .scrollbar-hide {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* 暗色主题滚动条样式 */
  .dark .custom-scrollbar {
    scrollbar-color: rgba(75, 85, 99, 0.5) transparent;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(75, 85, 99, 0.3);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(75, 85, 99, 0.6);
  }

  .dark .scrollbar-thin {
    scrollbar-color: rgba(75, 85, 99, 0.3) transparent;
  }

  .dark .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgba(75, 85, 99, 0.25);
  }

  .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: rgba(75, 85, 99, 0.5);
  }

  /* 高对比度滚动条（用于代码编辑器等） */
  .scrollbar-contrast {
    scrollbar-width: auto;
    scrollbar-color: rgba(59, 130, 246, 0.6) rgba(229, 231, 235, 0.2);
  }

  .scrollbar-contrast::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  .scrollbar-contrast::-webkit-scrollbar-track {
    background: rgba(229, 231, 235, 0.2);
    border-radius: 10px;
  }

  .scrollbar-contrast::-webkit-scrollbar-thumb {
    background: rgba(59, 130, 246, 0.6);
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease;
  }

  .scrollbar-contrast::-webkit-scrollbar-thumb:hover {
    background: rgba(59, 130, 246, 0.8);
  }

  .dark .scrollbar-contrast {
    scrollbar-color: rgba(59, 130, 246, 0.7) rgba(55, 65, 81, 0.3);
  }

  .dark .scrollbar-contrast::-webkit-scrollbar-track {
    background: rgba(55, 65, 81, 0.3);
  }

  .dark .scrollbar-contrast::-webkit-scrollbar-thumb {
    background: rgba(59, 130, 246, 0.7);
    border: 1px solid rgba(0, 0, 0, 0.2);
  }

  .dark .scrollbar-contrast::-webkit-scrollbar-thumb:hover {
    background: rgba(59, 130, 246, 0.9);
  }

  /* 应用全局默认滚动条样式 */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
  }

  *::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  *::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 8px;
  }

  *::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.3);
    border-radius: 8px;
    border: 2px solid transparent;
    background-clip: content-box;
    transition: all 0.2s ease;
  }

  *::-webkit-scrollbar-thumb:hover {
    background: rgba(156, 163, 175, 0.6);
  }

  *::-webkit-scrollbar-corner {
    background: transparent;
  }

  /* 暗色主题全局滚动条 */
  .dark * {
    scrollbar-color: rgba(75, 85, 99, 0.3) transparent;
  }

  .dark textarea,
  select,
  input {
    color: var(--color-text-primary);
    background-color: var(--color-bg-primary);
  }
  .dark button:hover {
    color: var(--color-text-primary);
    background-color: var(--color-bg-primary);
  }

  .dark *::-webkit-scrollbar-thumb {
    background: rgba(75, 85, 99, 0.3);
  }

  .dark *::-webkit-scrollbar-thumb:hover {
    background: rgba(75, 85, 99, 0.6);
  }

  /* Override space-y-6 margins */
  .space-y-6 > :not([hidden]) ~ :not([hidden]) {
    --tw-space-y-reverse: 0;
  }
}

/* 自定义标题栏样式 */
.title-bar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 48px;
  background: #1a1a1a;
  border-bottom: 1px solid #2d2d2d;
  z-index: 1000;
  -webkit-app-region: no-drag;
}

.title-bar-draggable {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  -webkit-app-region: drag;
}

.title-bar-left {
  display: flex;
  align-items: center;
  flex: 1;
}

.title-bar-title {
  font-size: 14px;
  font-weight: 500;
  color: #e5e5e5;
  font-family: 'OPPO Sans', 'Inter', system-ui, sans-serif;
  line-height: 1;
  user-select: none;
}

.title-bar-separator {
  color: #666;
  margin: 0 2px;
}

.title-bar-subtitle {
  color: #999;
  font-weight: 400;
}

.title-bar-right {
  display: flex;
  align-items: center;
  gap: 0;
  -webkit-app-region: no-drag;
}

.title-bar-button {
  width: 48px;
  height: 48px;
  border: none;
  background: transparent;
  color: #a3a3a3;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s ease;
  -webkit-app-region: no-drag;
}

.title-bar-button:hover {
  background: rgba(255, 255, 255, 0.08);
  color: #e5e5e5;
}

.title-bar-button.close:hover {
  background: #ef4444;
  color: white;
}

.title-bar-button:active {
  transform: scale(0.95);
}

/* Windows特定样式 */
@media (max-width: 1024px) {
  .title-bar-title {
    font-size: 13px;
  }

  .title-bar-button {
    width: 44px;
    height: 44px;
  }
}

/* 暗色主题优化 */
.dark .title-bar {
  background: #1a1a1a;
  border-bottom-color: #2d2d2d;
}

.dark .title-bar-title {
  color: #e5e5e5;
}

.dark .title-bar-subtitle {
  color: #999;
}

.dark .title-bar-button {
  color: #a3a3a3;
}

.dark .title-bar-button:hover {
  background: rgba(255, 255, 255, 0.08);
  color: #e5e5e5;
}

/* Custom animations */
@keyframes shimmer {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.shimmer {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200px 100%;
  animation: shimmer 1.5s infinite linear;
}

/* Prism.js theme overrides */
.token.string {
  color: #10b981;
}

.token.keyword {
  color: #3b82f6;
}

.token.function {
  color: #8b5cf6;
}

.token.comment {
  color: #6b7280;
}
