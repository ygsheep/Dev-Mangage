@tailwind base;
@tailwind components;
@tailwind utilities;

/* 全局文本选中样式 */
::selection {
  background-color: var(--color-primary-100);
  color: var(--color-primary-800);
}

::-moz-selection {
  background-color: var(--color-primary-100);
  color: var(--color-primary-800);
}

/* 自定义字体定义 */
@font-face {
  font-family: 'OPPO Sans';
  src: url('/fonts/OPPO-Sans-4.0.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono Nerd Font';
  src: url('/fonts/JetBrainsMonoNerdFont-Medium.ttf') format('truetype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@layer base {
  html {
    font-family: 'OPPO Sans', 'Inter', system-ui, sans-serif;
  }
  
  body {
    background-color: var(--color-bg-secondary);
    color: var(--color-text-primary);
    font-family: 'OPPO Sans', 'Inter', system-ui, sans-serif;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
}

@layer components {
  /* 代码和调试相关的字体类 */
  .font-mono-nerd {
    font-family: 'JetBrains Mono Nerd Font', 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace;
  }
  
  .font-ui {
    font-family: 'OPPO Sans', 'Inter', system-ui, sans-serif;
  }
  
  .debug-panel {
    font-family: 'JetBrains Mono Nerd Font', 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace;
  }
  
  .debug-console {
    font-family: 'JetBrains Mono Nerd Font', 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace;
    font-feature-settings: 'liga' 1, 'calt' 1;
  }

  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 font-medium py-2 px-4 rounded-theme-lg transition-colors duration-200;
    color: var(--color-text-inverse);
  }
  
  .btn-secondary {
    background-color: var(--color-bg-tertiary);
    color: var(--color-text-primary);
    @apply hover:opacity-80 font-medium py-2 px-4 rounded-theme-lg transition-all duration-200;
  }
  
  .btn-outline {
    border: 1px solid var(--color-border-primary);
    background-color: transparent;
    color: var(--color-text-secondary);
    @apply hover:bg-bg-tertiary font-medium py-2 px-4 rounded-theme-lg transition-all duration-200;
  }
  
  .card {
    background-color: var(--color-bg-paper);
    border: 1px solid var(--color-border-primary);
    box-shadow: var(--card-shadow);
    @apply rounded-theme-lg p-6 transition-all duration-200;
  }
  
  .input {
    background-color: var(--color-bg-paper);
    border: 1px solid var(--color-border-primary);
    color: var(--color-text-primary);
    @apply block w-full px-3 py-2 rounded-theme-md shadow-theme-sm focus:outline-none transition-all duration-200;
  }
  
  .input:focus {
    border-color: var(--color-focus);
    box-shadow: var(--focus-ring);
  }
  
  .input::placeholder {
    color: var(--color-text-tertiary);
  }
  
  .label {
    color: var(--color-text-secondary);
    @apply block text-sm font-medium mb-2;
  }
  
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  
  .method-badge {
    @apply inline-flex items-center px-2 py-1 rounded text-xs font-semibold tracking-wide uppercase;
  }
  
  .status-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
}

@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border-secondary) transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: var(--color-border-secondary);
    border-radius: 3px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-border-primary);
  }
  
  /* Override space-y-6 margins */
  .space-y-6 > :not([hidden]) ~ :not([hidden]) {
    --tw-space-y-reverse: 0;
  }
}

/* 自定义标题栏样式 */
.title-bar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 48px;
  background: #1a1a1a;
  border-bottom: 1px solid #2d2d2d;
  z-index: 1000;
  -webkit-app-region: no-drag;
}

.title-bar-draggable {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  -webkit-app-region: drag;
}

.title-bar-left {
  display: flex;
  align-items: center;
  flex: 1;
}

.title-bar-title {
  font-size: 14px;
  font-weight: 500;
  color: #e5e5e5;
  font-family: 'OPPO Sans', 'Inter', system-ui, sans-serif;
  line-height: 1;
  user-select: none;
}

.title-bar-separator {
  color: #666;
  margin: 0 2px;
}

.title-bar-subtitle {
  color: #999;
  font-weight: 400;
}

.title-bar-right {
  display: flex;
  align-items: center;
  gap: 0;
  -webkit-app-region: no-drag;
}

.title-bar-button {
  width: 48px;
  height: 48px;
  border: none;
  background: transparent;
  color: #a3a3a3;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s ease;
  -webkit-app-region: no-drag;
}

.title-bar-button:hover {
  background: rgba(255, 255, 255, 0.08);
  color: #e5e5e5;
}

.title-bar-button.close:hover {
  background: #ef4444;
  color: white;
}

.title-bar-button:active {
  transform: scale(0.95);
}

/* Windows特定样式 */
@media (max-width: 1024px) {
  .title-bar-title {
    font-size: 13px;
  }
  
  .title-bar-button {
    width: 44px;
    height: 44px;
  }
}

/* 确保内容不被标题栏遮挡 */
.app-with-titlebar {
  padding-top: 48px;
}

/* 暗色主题优化 */
.dark .title-bar {
  background: #1a1a1a;
  border-bottom-color: #2d2d2d;
}

.dark .title-bar-title {
  color: #e5e5e5;
}

.dark .title-bar-subtitle {
  color: #999;
}

.dark .title-bar-button {
  color: #a3a3a3;
}

.dark .title-bar-button:hover {
  background: rgba(255, 255, 255, 0.08);
  color: #e5e5e5;
}

/* Custom animations */
@keyframes shimmer {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.shimmer {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200px 100%;
  animation: shimmer 1.5s infinite linear;
}

/* Prism.js theme overrides */
.token.string {
  color: #10B981;
}

.token.keyword {
  color: #3B82F6;
}

.token.function {
  color: #8B5CF6;
}

.token.comment {
  color: #6B7280;
}