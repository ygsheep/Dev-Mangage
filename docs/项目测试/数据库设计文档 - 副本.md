### 2. 资讯内容系统 (News Content System)

#### 2.1 资讯分类表 (news_categories)
```sql
CREATE TABLE news_categories (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL,
    name_en VARCHAR(50),
    description TEXT,
    icon_url VARCHAR(255),
    color_code VARCHAR(7),
    parent_id BIGINT NULL,
    sort_order INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    keywords JSON, -- 分类关键词，用于自动分类
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (parent_id) REFERENCES news_categories(id) ON DELETE SET NULL,
    INDEX idx_parent_id (parent_id),
    INDEX idx_sort_order (sort_order)
);
```

#### 2.2 资讯来源表 (news_sources)
```sql
CREATE TABLE news_sources (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    website_url VARCHAR(255),
    rss_url VARCHAR(255),
    api_endpoint VARCHAR(255),
    source_type ENUM('rss', 'api', 'crawler') NOT NULL,
    credibility_score DECIMAL(3,2) DEFAULT 0.80, -- 可信度评分
    is_active BOOLEAN DEFAULT TRUE,
    crawl_interval INT DEFAULT 3600, -- 爬取间隔(秒)
    last_crawled_at TIMESTAMP NULL,
    config JSON, -- 爬取配置
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_source_type (source_type),
    INDEX idx_last_crawled (last_crawled_at)
);
```

#### 2.3 资讯元数据表 (news_metadata) 
```sql
CREATE TABLE news_metadata (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    source_id BIGINT NOT NULL,
    title VARCHAR(500) NOT NULL,
    summary TEXT,
    author VARCHAR(100),
    source_url VARCHAR(500) UNIQUE NOT NULL,
    cover_image_url VARCHAR(500), -- 封面图片
    published_at TIMESTAMP NOT NULL,
    crawled_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    language VARCHAR(10) DEFAULT 'zh-CN',
    category_id BIGINT,
    content_type ENUM('article', 'video', 'audio') NOT NULL, -- 内容类型
    tags JSON, -- 标签数组
    keywords JSON, -- 关键词数组
    sentiment_score DECIMAL(3,2), -- 情感分数 (-1到1)
    importance_score DECIMAL(3,2), -- 重要性分数 (0到1)
    view_count BIGINT DEFAULT 0, -- 浏览次数
    like_count INT DEFAULT 0, -- 点赞数
    share_count INT DEFAULT 0, -- 分享数
    comment_count INT DEFAULT 0, -- 评论数
    duration INT NULL, -- 音视频时长(秒)，文章为NULL
    is_processed BOOLEAN DEFAULT FALSE,
    is_duplicate BOOLEAN DEFAULT FALSE,
    duplicate_of BIGINT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    FOREIGN KEY (source_id) REFERENCES news_sources(id) ON DELETE CASCADE,
    FOREIGN KEY (category_id) REFERENCES news_categories(id) ON DELETE SET NULL,
    FOREIGN KEY (duplicate_of) REFERENCES news_metadata(id) ON DELETE SET NULL,
    INDEX idx_source_id (source_id),
    INDEX idx_published_at (published_at),
    INDEX idx_content_type (content_type),
    INDEX idx_category_id (category_id),
    INDEX idx_is_processed (is_processed),
    INDEX idx_importance_score (importance_score),
    INDEX idx_view_count (view_count),
    INDEX idx_is_active (is_active),
    FULLTEXT idx_search (title, summary)
);
```
