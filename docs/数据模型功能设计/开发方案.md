# DevAPI Manager æ•°æ®æ¨¡å‹åŠŸèƒ½å¼€å‘æ–¹æ¡ˆ

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯
åŸºäºå¯¹ç°æœ‰DevAPI Managerç³»ç»Ÿå’Œæ•°æ®æ¨¡å‹åŠŸèƒ½è®¾è®¡æ–‡æ¡£çš„æ·±å…¥åˆ†æï¼Œåˆ¶å®šæœ¬å¼€å‘æ–¹æ¡ˆä»¥ç³»ç»Ÿæ€§åœ°å¢å¼ºå¹³å°çš„æ•°æ®åº“ç®¡ç†èƒ½åŠ›ã€‚

### 1.2 ç›®æ ‡ä¸æ„¿æ™¯
- **ç›®æ ‡**ï¼šæ„å»ºä¸šç•Œé¢†å…ˆçš„æ•°æ®æ¨¡å‹ç®¡ç†å¹³å°
- **æ„¿æ™¯**ï¼šé€šè¿‡AIé©±åŠ¨çš„æ™ºèƒ½åŒ–åŠŸèƒ½ï¼Œå¤§å¹…æå‡æ•°æ®åº“è®¾è®¡æ•ˆç‡å’Œè´¨é‡
- **ä»·å€¼**ï¼šä¸ºå¼€å‘å›¢é˜Ÿæä¾›å®Œæ•´çš„æ•°æ®åº“ç”Ÿå‘½å‘¨æœŸç®¡ç†è§£å†³æ–¹æ¡ˆ

## 2. ç°çŠ¶åˆ†æ

### 2.1 å½“å‰ç³»ç»Ÿèƒ½åŠ›
âœ… **å·²å…·å¤‡åŠŸèƒ½**ï¼š
- åŸºç¡€æ•°æ®è¡¨CRUDæ“ä½œ
- ç®€å•å­—æ®µå’Œç´¢å¼•ç®¡ç†
- é¡¹ç›®çº§åˆ«çš„æ•°æ®ç»„ç»‡
- Swaggeræ–‡æ¡£å¯¼å…¥
- åŸºç¡€çš„MCPæœç´¢é›†æˆ

âš ï¸ **åŠŸèƒ½ç¼ºå£**ï¼š
- **ç¼ºä¹å®Œæ•´çš„æ•°æ®æ¨¡å‹è®¾è®¡å·¥å…·**
  - æ— å¯è§†åŒ–ERå›¾è®¾è®¡å™¨
  - ç¼ºå°‘æ‹–æ‹½å¼è¡¨ç»“æ„è®¾è®¡
  - æ— äº¤äº’å¼å­—æ®µç¼–è¾‘å™¨
  - ç¼ºä¹è¡¨å…³ç³»å¯è§†åŒ–ç®¡ç†
  - æ— æ•°æ®ç±»å‹æ™ºèƒ½æ¨è
  - ç¼ºå°‘æ‰¹é‡æ“ä½œå’Œæ¨¡æ¿åŠŸèƒ½

- **æ— AIæ–‡æ¡£è§£æèƒ½åŠ›**
  - ä¸æ”¯æŒMarkdownæ–‡æ¡£è‡ªåŠ¨è§£æ
  - æ— æ³•å¤„ç†SQLå»ºè¡¨è¯­å¥å¯¼å…¥
  - ç¼ºä¹Excelæ•°æ®å­—å…¸è§£æ
  - æ— Word/PDFæ–‡æ¡£æ™ºèƒ½è¯†åˆ«
  - æ²¡æœ‰AIæœåŠ¡é›†æˆæ¡†æ¶
  - ç¼ºå°‘å¤šè¯­è¨€æ–‡æ¡£æ”¯æŒ

- **å…³ç³»ç®¡ç†åŠŸèƒ½ä¸å®Œå–„**
  - æ— å¤–é”®çº¦æŸå¯è§†åŒ–ç®¡ç†
  - ç¼ºä¹å…³ç³»å›¾è‡ªåŠ¨å¸ƒå±€
  - æ— çº§è”æ“ä½œé…ç½®ç•Œé¢
  - ç¼ºå°‘å…³ç³»ä¾èµ–åˆ†æ
  - æ— å¤šå¯¹å¤šå…³ç³»ä¸­é—´è¡¨è‡ªåŠ¨ç”Ÿæˆ
  - ç¼ºä¹å…³ç³»å®Œæ•´æ€§æ£€æŸ¥

- **æ— SQLä»£ç ç”ŸæˆåŠŸèƒ½**
  - ä¸æ”¯æŒCREATE TABLEè¯­å¥ç”Ÿæˆ
  - ç¼ºä¹ALTER TABLEè¿ç§»è„šæœ¬
  - æ— å¤šæ•°æ®åº“æ–¹è¨€æ”¯æŒï¼ˆMySQL/PostgreSQL/SQLiteï¼‰
  - æ²¡æœ‰ç´¢å¼•ä¼˜åŒ–å»ºè®®ç”Ÿæˆ
  - ç¼ºå°‘æ•°æ®åˆå§‹åŒ–è„šæœ¬ç”Ÿæˆ
  - æ— æ‰¹é‡å¯¼å‡ºå’Œéƒ¨ç½²åŠŸèƒ½

- **ç¼ºä¹ç‰ˆæœ¬æ§åˆ¶å’Œå˜æ›´ç®¡ç†**
  - æ— æ•°æ®æ¨¡å‹ç‰ˆæœ¬å†å²è®°å½•
  - ç¼ºä¹å˜æ›´å·®å¼‚å¯¹æ¯”åŠŸèƒ½
  - æ²¡æœ‰å›æ»šå’Œæ¢å¤æœºåˆ¶
  - æ— å›¢é˜Ÿåä½œå˜æ›´å®¡æ ¸æµç¨‹
  - ç¼ºå°‘å˜æ›´å½±å“åˆ†æ
  - æ— è‡ªåŠ¨åŒ–éƒ¨ç½²é›†æˆ

### 2.2 æŠ€æœ¯æ¶æ„ç°çŠ¶
- **å‰ç«¯**ï¼šReact 18 + TypeScript + Tailwind CSS âœ…
- **åç«¯**ï¼šNode.js + Express + Prisma ORM âœ…
- **æ•°æ®åº“**ï¼šSQLiteï¼ˆå¼€å‘ï¼‰/PostgreSQLï¼ˆç”Ÿäº§ï¼‰âœ…
- **AIé›†æˆ**ï¼šMCPåè®®åŸºç¡€ âš ï¸ï¼ˆéœ€è¦å¢å¼ºï¼‰

## 3. ç³»ç»Ÿå¢å¼ºè®¾è®¡

### 3.1 åŠŸèƒ½æ¶æ„è®¾è®¡

```mermaid
graph TB
    A[æ•°æ®æ¨¡å‹ç®¡ç†å¹³å°] --> B[æ ¸å¿ƒç®¡ç†åŠŸèƒ½]
    A --> C[æ™ºèƒ½åŒ–åŠŸèƒ½]
    A --> D[åä½œåŠŸèƒ½]
    A --> E[é›†æˆåŠŸèƒ½]
    
    B --> B1[è¡¨ç»“æ„ç®¡ç†]
    B --> B2[å­—æ®µç®¡ç†]
    B --> B3[ç´¢å¼•ä¼˜åŒ–]
    B --> B4[å…³ç³»ç®¡ç†]
    
    C --> C1[AIæ–‡æ¡£è§£æ]
    C --> C2[SQLä»£ç ç”Ÿæˆ]
    C --> C3[æ™ºèƒ½æ¨è]
    C --> C4[æ€§èƒ½åˆ†æ]
    
    D --> D1[ç‰ˆæœ¬æ§åˆ¶]
    D --> D2[å˜æ›´å®¡æ ¸]
    D --> D3[å›¢é˜Ÿæƒé™]
    D --> D4[åä½œç¼–è¾‘]
    
    E --> E1[å¤šæ•°æ®åº“æ”¯æŒ]
    E --> E2[CI/CDé›†æˆ]
    E --> E3[ç¬¬ä¸‰æ–¹å·¥å…·]
    E --> E4[APIå¼€æ”¾]
```

### 3.2 æ•°æ®åº“æ¶æ„å¢å¼º

#### 3.2.1 æ–°å¢æ•°æ®è¡¨ç»“æ„
```sql
-- æ•°æ®æ¨¡å‹ç‰ˆæœ¬ç®¡ç†
CREATE TABLE model_versions (
  id VARCHAR(36) PRIMARY KEY,
  project_id VARCHAR(36) NOT NULL,
  version_number VARCHAR(20) NOT NULL,
  change_description TEXT,
  created_by VARCHAR(36),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (project_id) REFERENCES projects(id)
);

-- å­—æ®µæšä¸¾å€¼ç®¡ç†
CREATE TABLE field_enum_values (
  id VARCHAR(36) PRIMARY KEY,
  field_id VARCHAR(36) NOT NULL,
  value VARCHAR(255) NOT NULL,
  label VARCHAR(255),
  sort_order INT DEFAULT 0,
  is_default BOOLEAN DEFAULT FALSE,
  FOREIGN KEY (field_id) REFERENCES database_fields(id)
);

-- è¡¨å…³ç³»å®šä¹‰
CREATE TABLE table_relationships (
  id VARCHAR(36) PRIMARY KEY,
  from_table_id VARCHAR(36) NOT NULL,
  to_table_id VARCHAR(36) NOT NULL,
  from_field_id VARCHAR(36) NOT NULL,
  to_field_id VARCHAR(36) NOT NULL,
  relationship_type ENUM('ONE_TO_ONE', 'ONE_TO_MANY', 'MANY_TO_MANY') NOT NULL,
  on_update ENUM('CASCADE', 'SET_NULL', 'RESTRICT', 'NO_ACTION') DEFAULT 'RESTRICT',
  on_delete ENUM('CASCADE', 'SET_NULL', 'RESTRICT', 'NO_ACTION') DEFAULT 'RESTRICT',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- AIè§£æå†å²è®°å½•
CREATE TABLE ai_parse_history (
  id VARCHAR(36) PRIMARY KEY,
  project_id VARCHAR(36) NOT NULL,
  file_name VARCHAR(255) NOT NULL,
  file_type VARCHAR(50) NOT NULL,
  ai_provider VARCHAR(50) NOT NULL,
  parse_result JSON,
  status ENUM('SUCCESS', 'FAILED', 'PARTIAL') NOT NULL,
  error_message TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 3.3 AIé›†æˆæ¶æ„

#### 3.3.1 AIæœåŠ¡é€‚é…å™¨è®¾è®¡
```typescript
interface AIServiceAdapter {
  parseDocument(content: string, type: DocumentType): Promise<ParsedModel>
  generateSQL(model: DataModel, dialect: SQLDialect): Promise<string>
  optimizeSchema(schema: TableSchema): Promise<OptimizationSuggestion[]>
  suggestIndexes(table: TableDefinition): Promise<IndexSuggestion[]>
}

class OllamaAdapter implements AIServiceAdapter {
  constructor(private config: OllamaConfig) {}
  
  async parseDocument(content: string, type: DocumentType): Promise<ParsedModel> {
    const prompt = this.buildPrompt(content, type)
    const response = await this.callOllama(prompt)
    return this.validateAndParse(response)
  }
}

class OpenAIAdapter implements AIServiceAdapter {
  constructor(private config: OpenAIConfig) {}
  // ç±»ä¼¼å®ç°...
}
```

#### 3.3.2 æç¤ºè¯å·¥ç¨‹ä½“ç³»
```typescript
const PROMPTS = {
  DOCUMENT_PARSE: {
    MARKDOWN: `åˆ†æä»¥ä¸‹Markdownæ•°æ®åº“è®¾è®¡æ–‡æ¡£ï¼Œæå–è¡¨ç»“æ„ä¿¡æ¯...`,
    SQL: `è§£æä»¥ä¸‹SQLå»ºè¡¨è¯­å¥ï¼Œè½¬æ¢ä¸ºæ ‡å‡†åŒ–ç»“æ„...`,
    EXCEL: `åˆ†æExcelæ•°æ®å­—å…¸ï¼Œæå–å­—æ®µå®šä¹‰...`
  },
  
  SQL_GENERATION: {
    MYSQL: `åŸºäºæ•°æ®æ¨¡å‹ç”ŸæˆMySQLå»ºè¡¨è¯­å¥...`,
    POSTGRESQL: `ç”ŸæˆPostgreSQLå…¼å®¹çš„DDLè¯­å¥...`,
    SQLITE: `ç”ŸæˆSQLiteæ•°æ®åº“è„šæœ¬...`
  },
  
  OPTIMIZATION: {
    INDEX_SUGGESTION: `åˆ†æè¡¨ç»“æ„ï¼Œå»ºè®®æœ€ä¼˜ç´¢å¼•ç­–ç•¥...`,
    PERFORMANCE_REVIEW: `è¯„ä¼°æ•°æ®åº“è®¾è®¡æ€§èƒ½é—®é¢˜...`
  }
}
```

## 4. å®æ–½è®¡åˆ’

### 4.1 å¼€å‘é˜¶æ®µè§„åˆ’

#### é˜¶æ®µä¸€ï¼šåŸºç¡€å¢å¼ºï¼ˆç¬¬1-3å‘¨ï¼‰
**ç›®æ ‡**ï¼šå®Œå–„æ ¸å¿ƒæ•°æ®æ¨¡å‹ç®¡ç†åŠŸèƒ½

**ä¸»è¦ä»»åŠ¡**ï¼š
- [x] æ•°æ®åº“Schemaæ‰©å±• âœ… **å·²å®Œæˆ (2025-08-15)**
  - âœ… æ–°å¢ç‰ˆæœ¬ç®¡ç†è¡¨ (ModelVersion)
  - âœ… æ‰©å±•å…³ç³»ç®¡ç†è¡¨ (TableRelationshipå¢å¼º)
  - âœ… å¢åŠ æšä¸¾å€¼ç®¡ç†è¡¨ (FieldEnumValue)
  - âœ… æ–°å¢è¡¨ç»Ÿè®¡è¡¨ (TableStatistics)
  - âœ… æ–°å¢AIè§£æå†å²è¡¨ (AIParseHistory)
  - âœ… æ–°å¢ç´¢å¼•å­—æ®µè¡¨ (IndexField)
- [x] åŸºç¡€APIæ¥å£å¼€å‘ âœ… **å·²å®Œæˆ (2025-08-15)**
  - âœ… è¡¨å…³ç³»CRUDæ¥å£ (32ä¸ªç«¯ç‚¹)
  - âœ… å­—æ®µæšä¸¾å€¼ç®¡ç†æ¥å£ (æ‰¹é‡æ“ä½œæ”¯æŒ)
  - âœ… ç‰ˆæœ¬æ§åˆ¶æ¥å£ (Gité£æ ¼åˆ†æ”¯ç®¡ç†)
  - âœ… è¡¨ç»Ÿè®¡ä¿¡æ¯æ¥å£ (é¡¹ç›®çº§æ±‡æ€»åˆ†æ)
- [x] å‰ç«¯ç»„ä»¶å¼€å‘ âœ… **å·²å®Œæˆ (2025-08-15)**
  - âœ… å…³ç³»ç¼–è¾‘å™¨ç»„ä»¶ (RelationshipManager.tsx)
  - âœ… æšä¸¾å€¼ç®¡ç†ç»„ä»¶ (EnumValueManager.tsx)
  - âœ… ç‰ˆæœ¬å¯¹æ¯”ç»„ä»¶ (VersionControl.tsx)
  - âœ… ç»Ÿè®¡ä»ªè¡¨æ¿ç»„ä»¶ (StatsDashboard.tsx)

**æŠ€æœ¯é‡ç‚¹**ï¼š
- Prisma Schemaæ›´æ–°å’Œè¿ç§»
- æ•°æ®å®Œæ•´æ€§çº¦æŸè®¾è®¡
- å‰ç«¯çŠ¶æ€ç®¡ç†ä¼˜åŒ–

#### é˜¶æ®µäºŒï¼šAIé›†æˆï¼ˆç¬¬4-6å‘¨ï¼‰
**ç›®æ ‡**ï¼šå®ç°AIé©±åŠ¨çš„æ–‡æ¡£è§£æå’Œä»£ç ç”Ÿæˆ

**ä¸»è¦ä»»åŠ¡**ï¼š
- [x] AIæœåŠ¡é›†æˆæ¡†æ¶ âœ… **å·²å®Œæˆ (2025-08-15)**
  - âœ… å¤šAIæœåŠ¡é€‚é…å™¨å®ç° (OpenAI, DeepSeek, Ollamaç­‰)
  - âœ… ç»Ÿä¸€çš„APIæŠ½è±¡å±‚ (AIServiceManager)
  - âœ… é…ç½®ç®¡ç†å’Œåˆ‡æ¢æœºåˆ¶ (åŠ¨æ€æä¾›å•†åˆ‡æ¢)
  - âœ… å¥åº·æ£€æŸ¥å’Œç›‘æ§ç³»ç»Ÿ
  - âœ… ä½¿ç”¨ç»Ÿè®¡å’Œæˆæœ¬è·Ÿè¸ª
- [x] æ–‡æ¡£è§£æåŠŸèƒ½ âœ… **å·²å®Œæˆ (2025-08-15)**
  - âœ… æ”¯æŒMarkdownã€SQLã€Excelã€Wordã€PDFã€JSONç­‰æ ¼å¼
  - âœ… ç»“æœéªŒè¯å’Œä¿®æ­£æœºåˆ¶ (æ™ºèƒ½ä¿®æ­£æœåŠ¡)
  - âœ… æ‰¹é‡å¯¼å…¥å·¥ä½œæµ (äº‹ä»¶é©±åŠ¨çš„ä»»åŠ¡é˜Ÿåˆ—)
  - âœ… è§£æå†å²å’Œé”™è¯¯è¿½è¸ª
  - âœ… æ–‡æ¡£ç±»å‹è‡ªåŠ¨è¯†åˆ«
- [x] SQLä»£ç ç”Ÿæˆ âœ… **å·²å®Œæˆ (2025-08-15)**
  - âœ… å¤šæ•°æ®åº“æ–¹è¨€æ”¯æŒ (MySQL, PostgreSQL, SQLite, SQL Server, Oracle)
  - âœ… è¿ç§»è„šæœ¬ç”Ÿæˆ (åŒ…å«å›æ»šæ”¯æŒ)
  - âœ… ä»£ç æ¨¡æ¿ç®¡ç† (å†…ç½®å’Œè‡ªå®šä¹‰æ¨¡æ¿)
  - âœ… SQLå…ƒæ•°æ®å’Œæ€§èƒ½åˆ†æ
  - âœ… ç´¢å¼•ä¼˜åŒ–å»ºè®®

**æŠ€æœ¯é‡ç‚¹**ï¼š
- âœ… æç¤ºè¯å·¥ç¨‹å’Œä¼˜åŒ–
- âœ… æ–‡ä»¶ä¸Šä¼ å’Œå¤„ç†
- âœ… å¼‚æ­¥ä»»åŠ¡å¤„ç†

#### é˜¶æ®µä¸‰ï¼šå‰ç«¯é›†æˆï¼ˆç¬¬7-8å‘¨ï¼‰
**ç›®æ ‡**ï¼šå®Œå–„AIåŠŸèƒ½çš„å‰ç«¯é›†æˆå’Œç”¨æˆ·ä½“éªŒ

**ä¸»è¦ä»»åŠ¡**ï¼š
- [x] AIæ–‡æ¡£è§£æå‰ç«¯ç»„ä»¶ âœ… **å·²å®Œæˆ (2025-08-15)**
  - âœ… AIDocumentParserç»„ä»¶ (æ™ºèƒ½æ–‡æ¡£è§£æå™¨)
  - âœ… å®æ—¶AIæœåŠ¡å¥åº·çŠ¶æ€æ˜¾ç¤º
  - âœ… å¤šæä¾›å•†é€‰æ‹©å’Œé…ç½®
  - âœ… è§£æç»“æœé¢„è§ˆå’Œç¡®è®¤
- [x] æ‰¹é‡å¯¼å…¥ç®¡ç†å™¨ âœ… **å·²å®Œæˆ (2025-08-15)**  
  - âœ… BatchImportManagerç»„ä»¶
  - âœ… å®æ—¶ä»»åŠ¡è¿›åº¦ç›‘æ§
  - âœ… å¤šæ–‡æ¡£æ‰¹é‡å¤„ç†
  - âœ… ä»»åŠ¡å†å²å’ŒæŠ¥å‘Šç”Ÿæˆ
- [x] SQLç”Ÿæˆå™¨å¢å¼º âœ… **å·²å®Œæˆ (2025-08-15)**
  - âœ… AIå¢å¼ºçš„SQLç”ŸæˆåŠŸèƒ½
  - âœ… æ¨¡æ¿é€‰æ‹©å’Œè‡ªå®šä¹‰
  - âœ… è¿ç§»è„šæœ¬å¯è§†åŒ–é…ç½®
  - âœ… SQLå…ƒæ•°æ®å’Œè­¦å‘Šæ˜¾ç¤º
- [ ] ä»£ç æ¨¡æ¿ç®¡ç†ç•Œé¢ ğŸš§ **è¿›è¡Œä¸­**
  - æ¨¡æ¿åˆ›å»ºå’Œç¼–è¾‘ç•Œé¢
  - æ¨¡æ¿é¢„è§ˆå’Œæµ‹è¯•åŠŸèƒ½
  - æ¨¡æ¿å¯¼å…¥å¯¼å‡º
  - æ¨¡æ¿åˆ†ç±»å’Œæœç´¢

**æŠ€æœ¯é‡ç‚¹**ï¼š
- âœ… Reactç»„ä»¶è®¾è®¡å’ŒçŠ¶æ€ç®¡ç†
- âœ… å®æ—¶æ•°æ®åŒæ­¥å’Œè¿›åº¦è¿½è¸ª
- âœ… ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- ğŸš§ æ¨¡æ¿å¼•æ“å‰ç«¯é›†æˆ

#### é˜¶æ®µä¸‰ï¼šå¯è§†åŒ–å¢å¼ºï¼ˆç¬¬7-8å‘¨ï¼‰
**ç›®æ ‡**ï¼šæå‡ç”¨æˆ·ä½“éªŒå’Œå¯è§†åŒ–èƒ½åŠ›

**ä¸»è¦ä»»åŠ¡**ï¼š
- [ ] å…³ç³»å›¾å¯è§†åŒ–
  - ReactFlowé›†æˆä¼˜åŒ–
  - äº¤äº’å¼å…³ç³»ç¼–è¾‘
  - è‡ªåŠ¨å¸ƒå±€ç®—æ³•
- [ ] æ•°æ®æ¨¡å‹è®¾è®¡å™¨
  - æ‹–æ‹½å¼è¡¨è®¾è®¡
  - å®æ—¶é¢„è§ˆåŠŸèƒ½
  - åä½œç¼–è¾‘æ”¯æŒ
- [ ] ä»ªè¡¨æ¿å’Œç»Ÿè®¡
  - é¡¹ç›®æ¦‚è§ˆé¢æ¿
  - æ€§èƒ½æŒ‡æ ‡ç›‘æ§
  - ä½¿ç”¨æƒ…å†µåˆ†æ

**æŠ€æœ¯é‡ç‚¹**ï¼š
- å¤æ‚ç»„ä»¶æ€§èƒ½ä¼˜åŒ–
- å®æ—¶æ•°æ®åŒæ­¥
- ç”¨æˆ·ä½“éªŒè®¾è®¡

#### é˜¶æ®µå››ï¼šé«˜çº§åŠŸèƒ½ï¼ˆç¬¬9-10å‘¨ï¼‰
**ç›®æ ‡**ï¼šå®Œå–„åä½œå’Œé›†æˆåŠŸèƒ½

**ä¸»è¦ä»»åŠ¡**ï¼š
- [ ] ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
  - Gité£æ ¼çš„å˜æ›´è·Ÿè¸ª
  - åˆ†æ”¯å’Œåˆå¹¶æ”¯æŒ
  - å†²çªè§£å†³æœºåˆ¶
- [ ] å›¢é˜Ÿåä½œåŠŸèƒ½
  - æƒé™ç®¡ç†ä½“ç³»
  - è¯„è®ºå’Œå®¡æ ¸æµç¨‹
  - å®æ—¶åä½œç¼–è¾‘
- [ ] å¤–éƒ¨é›†æˆ
  - CI/CDå·¥å…·é›†æˆ
  - ç¬¬ä¸‰æ–¹æ•°æ®åº“è¿æ¥
  - APIå¼€æ”¾å¹³å°

**æŠ€æœ¯é‡ç‚¹**ï¼š
- æƒé™æ¨¡å‹è®¾è®¡
- å®æ—¶é€šä¿¡å®ç°
- é›†æˆæ¥å£æ ‡å‡†åŒ–

### 4.2 èµ„æºé…ç½®è®¡åˆ’

#### 4.2.1 äººåŠ›èµ„æº
- **å‰ç«¯å¼€å‘**ï¼š2äºº
- **åç«¯å¼€å‘**ï¼š2äºº
- **AIå·¥ç¨‹å¸ˆ**ï¼š1äºº
- **äº§å“è®¾è®¡**ï¼š1äºº
- **æµ‹è¯•å·¥ç¨‹å¸ˆ**ï¼š1äºº

#### 4.2.2 æŠ€æœ¯èµ„æº
- **å¼€å‘ç¯å¢ƒ**ï¼šæœ¬åœ°å¼€å‘ + äº‘ç«¯æµ‹è¯•
- **AIæœåŠ¡**ï¼šOllamaæœ¬åœ°éƒ¨ç½² + OpenAI API
- **æ•°æ®åº“**ï¼šPostgreSQLç”Ÿäº§ç¯å¢ƒ
- **éƒ¨ç½²å¹³å°**ï¼šDocker + Kubernetes

## 5. æŠ€æœ¯å®æ–½æ–¹æ¡ˆ

### 5.1 å‰ç«¯æ¶æ„ä¼˜åŒ–

#### 5.1.1 ç»„ä»¶é‡æ„æ–¹æ¡ˆ
```
src/components/data-model/
â”œâ”€â”€ managers/
â”‚   â”œâ”€â”€ TableManager.tsx          # è¡¨ç®¡ç†ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ FieldManager.tsx          # å­—æ®µç®¡ç†å™¨
â”‚   â”œâ”€â”€ RelationshipManager.tsx   # å…³ç³»ç®¡ç†å™¨
â”‚   â””â”€â”€ IndexManager.tsx          # ç´¢å¼•ç®¡ç†å™¨
â”œâ”€â”€ editors/
â”‚   â”œâ”€â”€ TableEditor.tsx           # è¡¨ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ FieldEditor.tsx           # å­—æ®µç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ RelationshipEditor.tsx    # å…³ç³»ç¼–è¾‘å™¨
â”‚   â””â”€â”€ EnumValueEditor.tsx       # æšä¸¾å€¼ç¼–è¾‘å™¨
â”œâ”€â”€ visualizers/
â”‚   â”œâ”€â”€ ERDiagram.tsx             # ERå›¾ç»„ä»¶
â”‚   â”œâ”€â”€ RelationshipGraph.tsx     # å…³ç³»å›¾
â”‚   â””â”€â”€ SchemaViewer.tsx          # æ¨¡å¼æŸ¥çœ‹å™¨
â”œâ”€â”€ generators/
â”‚   â”œâ”€â”€ SQLGenerator.tsx          # SQLç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ MigrationGenerator.tsx    # è¿ç§»è„šæœ¬ç”Ÿæˆå™¨
â”‚   â””â”€â”€ DocumentGenerator.tsx     # æ–‡æ¡£ç”Ÿæˆå™¨
â””â”€â”€ ai/
    â”œâ”€â”€ DocumentParser.tsx        # æ–‡æ¡£è§£æå™¨
    â”œâ”€â”€ SchemaOptimizer.tsx       # æ¨¡å¼ä¼˜åŒ–å™¨
    â””â”€â”€ AIAssistant.tsx           # AIåŠ©æ‰‹
```

#### 5.1.2 çŠ¶æ€ç®¡ç†å¢å¼º
```typescript
interface DataModelStore {
  // è¡¨ç®¡ç†çŠ¶æ€
  tables: Map<string, DatabaseTable>
  selectedTable: string | null
  
  // å…³ç³»ç®¡ç†çŠ¶æ€
  relationships: Map<string, TableRelationship>
  relationshipGraph: RelationshipGraph
  
  // AIåŠŸèƒ½çŠ¶æ€
  aiProvider: AIProvider
  parseHistory: AIParseRecord[]
  isAIProcessing: boolean
  
  // ç‰ˆæœ¬æ§åˆ¶çŠ¶æ€
  currentVersion: string
  versionHistory: ModelVersion[]
  pendingChanges: ChangeRecord[]
  
  // UIçŠ¶æ€
  activeView: 'tables' | 'relationships' | 'sql' | 'docs'
  sidebarCollapsed: boolean
  
  // æ“ä½œæ–¹æ³•
  loadProject: (projectId: string) => Promise<void>
  createTable: (data: CreateTableData) => Promise<void>
  updateRelationship: (data: RelationshipData) => Promise<void>
  parseDocument: (file: File, options: ParseOptions) => Promise<void>
  generateSQL: (options: GenerateOptions) => Promise<string>
  createVersion: (description: string) => Promise<void>
}
```

### 5.2 åç«¯æ¶æ„å¢å¼º

#### 5.2.1 æœåŠ¡å±‚é‡æ„
```typescript
// æ ¸å¿ƒæœåŠ¡ç±»
class DataModelService {
  constructor(
    private prisma: PrismaClient,
    private aiService: AIServiceManager,
    private versionService: VersionControlService
  ) {}
  
  async createTableWithFields(data: CreateTableWithFieldsData): Promise<DatabaseTable> {
    return this.prisma.$transaction(async (tx) => {
      const table = await tx.databaseTable.create({ data: data.table })
      const fields = await Promise.all(
        data.fields.map(field => tx.databaseField.create({
          data: { ...field, tableId: table.id }
        }))
      )
      await this.versionService.recordChange('CREATE_TABLE', table.id)
      return { ...table, fields }
    })
  }
  
  async parseDocumentWithAI(
    projectId: string,
    file: Buffer,
    fileName: string,
    options: ParseOptions
  ): Promise<ParseResult> {
    const parseResult = await this.aiService.parseDocument(
      file.toString(),
      this.getDocumentType(fileName)
    )
    
    // è®°å½•è§£æå†å²
    await this.prisma.aiParseHistory.create({
      data: {
        projectId,
        fileName,
        fileType: this.getDocumentType(fileName),
        aiProvider: options.provider,
        parseResult: parseResult as any,
        status: parseResult.success ? 'SUCCESS' : 'FAILED',
        errorMessage: parseResult.error
      }
    })
    
    return parseResult
  }
}
```

#### 5.2.2 AIæœåŠ¡ç®¡ç†å™¨
```typescript
class AIServiceManager {
  private providers: Map<string, AIServiceAdapter> = new Map()
  
  constructor() {
    this.providers.set('ollama', new OllamaAdapter())
    this.providers.set('openai', new OpenAIAdapter())
    this.providers.set('deepseek', new DeepSeekAdapter())
  }
  
  async parseDocument(
    content: string,
    type: DocumentType,
    provider: string = 'ollama'
  ): Promise<ParseResult> {
    const adapter = this.providers.get(provider)
    if (!adapter) {
      throw new Error(`Unsupported AI provider: ${provider}`)
    }
    
    try {
      const result = await adapter.parseDocument(content, type)
      return {
        success: true,
        data: result,
        metadata: {
          provider,
          timestamp: new Date(),
          modelVersion: adapter.getModelVersion()
        }
      }
    } catch (error) {
      return {
        success: false,
        error: error.message,
        metadata: { provider, timestamp: new Date() }
      }
    }
  }
}
```

## 6. è´¨é‡ä¿è¯

### 6.1 æµ‹è¯•ç­–ç•¥

#### 6.1.1 æµ‹è¯•å±‚æ¬¡
```
æµ‹è¯•é‡‘å­—å¡”:
â”œâ”€â”€ E2E Tests (10%)           # Playwright/Cypress
â”‚   â”œâ”€â”€ å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•
â”‚   â”œâ”€â”€ AIåŠŸèƒ½é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ è·¨æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•
â”œâ”€â”€ Integration Tests (20%)   # Jest + Supertest
â”‚   â”œâ”€â”€ APIæ¥å£é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ æ•°æ®åº“æ“ä½œæµ‹è¯•
â”‚   â””â”€â”€ AIæœåŠ¡é›†æˆæµ‹è¯•
â””â”€â”€ Unit Tests (70%)          # Jest + React Testing Library
    â”œâ”€â”€ ç»„ä»¶å•å…ƒæµ‹è¯•
    â”œâ”€â”€ å·¥å…·å‡½æ•°æµ‹è¯•
    â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘æµ‹è¯•
    â””â”€â”€ AIæç¤ºè¯æµ‹è¯•
```

#### 6.1.2 æµ‹è¯•è¦†ç›–ç‡è¦æ±‚
- **å•å…ƒæµ‹è¯•è¦†ç›–ç‡**ï¼šâ‰¥ 85%
- **é›†æˆæµ‹è¯•è¦†ç›–ç‡**ï¼šâ‰¥ 70%
- **E2Eæµ‹è¯•è¦†ç›–ç‡**ï¼šâ‰¥ 60%

### 6.2 æ€§èƒ½è¦æ±‚

#### 6.2.1 æ€§èƒ½æŒ‡æ ‡
- **é¡µé¢åŠ è½½æ—¶é—´**ï¼š< 2ç§’
- **AIè§£æå“åº”æ—¶é—´**ï¼š< 30ç§’
- **å¤§è¡¨æ¸²æŸ“æ€§èƒ½**ï¼šæ”¯æŒ1000+å­—æ®µæµç•…æ“ä½œ
- **å¹¶å‘ç”¨æˆ·æ”¯æŒ**ï¼šâ‰¥ 100ç”¨æˆ·åŒæ—¶åœ¨çº¿

#### 6.2.2 ä¼˜åŒ–ç­–ç•¥
- å‰ç«¯è™šæ‹Ÿæ»šåŠ¨å’Œæ‡’åŠ è½½
- åç«¯æŸ¥è¯¢ä¼˜åŒ–å’Œç¼“å­˜ç­–ç•¥
- AIè¯·æ±‚é˜Ÿåˆ—ç®¡ç†å’Œé‡è¯•æœºåˆ¶
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

## 7. é£é™©ç®¡æ§

### 7.1 æŠ€æœ¯é£é™©
| é£é™©é¡¹ | é£é™©ç­‰çº§ | ç¼“è§£æªæ–½ |
|--------|----------|----------|
| AIæœåŠ¡ç¨³å®šæ€§ | é«˜ | å¤šAIæœåŠ¡å•†å¤‡ä»½ï¼Œæœ¬åœ°æ¨¡å‹éƒ¨ç½² |
| å¤æ‚å…³ç³»å›¾æ€§èƒ½ | ä¸­ | æ¸è¿›å¼åŠ è½½ï¼Œç®€åŒ–è§†å›¾æ¨¡å¼ |
| æ•°æ®è¿ç§»å…¼å®¹æ€§ | ä¸­ | å®Œå–„çš„æµ‹è¯•å’Œå›æ»šæœºåˆ¶ |
| å¤§æ–‡ä»¶è§£æè¶…æ—¶ | ä½ | æ–‡ä»¶åˆ†ç‰‡å¤„ç†ï¼Œå¼‚æ­¥é˜Ÿåˆ— |

### 7.2 é¡¹ç›®é£é™©
| é£é™©é¡¹ | é£é™©ç­‰çº§ | ç¼“è§£æªæ–½ |
|--------|----------|----------|
| å¼€å‘è¿›åº¦å»¶æœŸ | ä¸­ | MVPä¼˜å…ˆï¼ŒåŠŸèƒ½åˆ†æœŸå‘å¸ƒ |
| å›¢é˜Ÿåè°ƒæˆæœ¬ | ä¸­ | æ¯æ—¥ç«™ä¼šï¼Œæ˜ç¡®æ¥å£è§„èŒƒ |
| ç”¨æˆ·æ¥å—åº¦ | ä½ | æ—©æœŸç”¨æˆ·åé¦ˆï¼Œå¿«é€Ÿè¿­ä»£ |

## 8. æˆåŠŸæ ‡å‡†

### 8.1 åŠŸèƒ½å®Œæˆåº¦æŒ‡æ ‡
- [ ] å®Œæ•´çš„æ•°æ®æ¨¡å‹ç®¡ç†åŠŸèƒ½ï¼ˆ100%ï¼‰
- [ ] AIæ–‡æ¡£è§£æå‡†ç¡®ç‡ï¼ˆâ‰¥ 90%ï¼‰
- [ ] SQLä»£ç ç”Ÿæˆæ­£ç¡®ç‡ï¼ˆâ‰¥ 95%ï¼‰
- [ ] å…³ç³»å›¾å¯è§†åŒ–å®Œæ•´æ€§ï¼ˆ100%ï¼‰
- [ ] ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½å®Œæ•´æ€§ï¼ˆ100%ï¼‰

### 8.2 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- [ ] æ–°ç”¨æˆ·ä¸Šæ‰‹æ—¶é—´ï¼ˆ< 30åˆ†é’Ÿï¼‰
- [ ] æ ¸å¿ƒåŠŸèƒ½æ“ä½œæ­¥éª¤ï¼ˆ< 5æ­¥ï¼‰
- [ ] ç”¨æˆ·æ»¡æ„åº¦è¯„åˆ†ï¼ˆâ‰¥ 4.5/5.0ï¼‰
- [ ] Bugåé¦ˆè§£å†³ç‡ï¼ˆâ‰¥ 95%ï¼‰

### 8.3 æŠ€æœ¯æŒ‡æ ‡
- [ ] ç³»ç»Ÿå¯ç”¨æ€§ï¼ˆâ‰¥ 99.5%ï¼‰
- [ ] å¹³å‡å“åº”æ—¶é—´ï¼ˆ< 3ç§’ï¼‰
- [ ] æ•°æ®ä¸€è‡´æ€§ï¼ˆ100%ï¼‰
- [ ] å®‰å…¨æ¼æ´æ•°é‡ï¼ˆ0ä¸ªé«˜å±ï¼‰

## 9. åç»­è§„åˆ’

### 9.1 ä¸­æœŸè§„åˆ’ï¼ˆ6ä¸ªæœˆï¼‰
- **å¤šæ•°æ®åº“å¼•æ“æ”¯æŒ**ï¼šMySQLã€Oracleã€SQL Server
- **é«˜çº§AIåŠŸèƒ½**ï¼šæ™ºèƒ½ç´¢å¼•æ¨èã€æ€§èƒ½ä¼˜åŒ–å»ºè®®
- **ä¼ä¸šçº§åŠŸèƒ½**ï¼šSSOé›†æˆã€å®¡è®¡æ—¥å¿—ã€å¤‡ä»½æ¢å¤
- **ç”Ÿæ€ç³»ç»Ÿæ‰©å±•**ï¼šæ’ä»¶æœºåˆ¶ã€ç¬¬ä¸‰æ–¹å·¥å…·é›†æˆ

### 9.2 é•¿æœŸæ„¿æ™¯ï¼ˆ1å¹´ï¼‰
- **äº‘åŸç”Ÿæ¶æ„**ï¼šå¾®æœåŠ¡åŒ–ã€å®¹å™¨åŒ–éƒ¨ç½²
- **AIé©±åŠ¨è®¾è®¡**ï¼šå…¨è‡ªåŠ¨æ•°æ®åº“è®¾è®¡åŠ©æ‰‹
- **åä½œå¹³å°åŒ–**ï¼šå¼€å‘è€…ç¤¾åŒºã€æ¨¡æ¿å¸‚åœº
- **å›½é™…åŒ–æ‹“å±•**ï¼šå¤šè¯­è¨€æ”¯æŒã€å…¨çƒéƒ¨ç½²

## 10. æ€»ç»“

æœ¬å¼€å‘æ–¹æ¡ˆåŸºäºå¯¹ç°æœ‰ç³»ç»Ÿçš„æ·±å…¥åˆ†æå’Œç”¨æˆ·éœ€æ±‚çš„å……åˆ†ç†è§£ï¼Œè®¾è®¡äº†ä¸€å¥—å®Œæ•´çš„æ•°æ®æ¨¡å‹ç®¡ç†åŠŸèƒ½å¢å¼ºæ–¹æ¡ˆã€‚é€šè¿‡åˆ†é˜¶æ®µå®æ–½ã€æ¸è¿›å¼å¢å¼ºçš„ç­–ç•¥ï¼Œæ—¢ä¿è¯äº†ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œåˆèƒ½å¿«é€Ÿå“åº”ç”¨æˆ·éœ€æ±‚ã€‚

**æ ¸å¿ƒä»·å€¼ç‚¹**ï¼š
1. **æ™ºèƒ½åŒ–**ï¼šAIé©±åŠ¨çš„æ–‡æ¡£è§£æå’Œä»£ç ç”Ÿæˆ
2. **å¯è§†åŒ–**ï¼šç›´è§‚çš„å…³ç³»å›¾å’Œäº¤äº’å¼è®¾è®¡å™¨
3. **åä½œåŒ–**ï¼šå®Œæ•´çš„å›¢é˜Ÿåä½œå’Œç‰ˆæœ¬æ§åˆ¶
4. **æ ‡å‡†åŒ–**ï¼šå¤šæ•°æ®åº“æ”¯æŒå’Œè¡Œä¸šæœ€ä½³å®è·µ

é€šè¿‡æœ¬æ–¹æ¡ˆçš„å®æ–½ï¼ŒDevAPI Managerå°†æˆä¸ºä¸šç•Œé¢†å…ˆçš„æ•°æ®åº“è®¾è®¡å’Œç®¡ç†å¹³å°ï¼Œä¸ºå¼€å‘å›¢é˜Ÿæä¾›å¼ºå¤§è€Œæ˜“ç”¨çš„æ•°æ®å»ºæ¨¡è§£å†³æ–¹æ¡ˆã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2025-08-15  
**é¢„è®¡å®Œæˆ**: 2025-10-15  
**ç»´æŠ¤å›¢é˜Ÿ**: DevAPIå›¢é˜Ÿ